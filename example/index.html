<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>ShogunCore Vanilla Test</title>
  <style>
    body {
      font-family: monospace;
      background: #f8f8f8;
      color: #222;
      padding: 2em;
    }

    pre {
      background: #fff;
      border: 1px solid #ccc;
      padding: 1em;
    }

    .ok {
      color: green;
    }

    .fail {
      color: red;
    }
  </style>
</head>

<body>
  <h1>ShogunCore Vanilla Test</h1>
  <pre id="output">Loading...</pre>
  <!-- Load Gun.js first -->
  <script src="https://cdn.jsdelivr.net/npm/gun@0.2020.1240/gun.js"></script>
  <script src="../dist/browser/shogun-core.js"></script>
  <script>
    function log(msg, cls) {
      const el = document.getElementById('output');
      el.innerHTML += `<div class="${cls || ''}">${msg}</div>`;
    }
    document.getElementById('output').textContent = '';

    if (window.SHOGUN_CORE) {
      log('✓ <b>ShogunCore</b> found on window', 'ok');
      const config = {
        oauth: { enabled: false },
        gunOptions: {
          peers: ['https://peer.wallie.io/gun', 'https://v5g5jseqhgkp43lppgregcfbvi.srv.us/gun', 'https://relay.shogun-eco.xyz/gun'],
        },
      };
      try {
        const shogun = window.SHOGUN_CORE(config);
        //shogun.initialize();
        console.log(shogun);

        window.gun = shogun.gun
        window.shogun = shogun

        log('✓ <b>ShogunCore</b> instance created', 'ok');
        log('typeof shogun.getPlugin: ' + typeof shogun.getPlugin, 'ok');
        log('ShogunCore keys: ' + Object.keys(shogun).join(', '), 'ok');
      } catch (e) {
        log('✗ Error creating ShogunCore: ' + e.message, 'fail');
        console.error(e);
      }
    } else {
      log('✗ <b>ShogunCore</b> NOT found on window', 'fail');
    }
  </script>
</body>

</html>